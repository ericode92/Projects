<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="/My Dev/Ericreates Website/main/style.css">
    <link rel="stylesheet" href="/My Dev/Ericreates Website/common/header.css">
    <link rel="stylesheet" href="/My Dev/Ericreates Website/common/footer.css">
    <link rel="stylesheet" href="search.css">
    <link rel="stylesheet" href="detail.css">
  <title>Ericreates Portfolio Search Result</title>
  <link rel="icon" type="image/png" href="/My Dev/Ericreates Website/images/Logo/favicon.png" />
</head>
<body>
    <!-- Header -->
    <nav id="mainNav" class="shrinkable">
      <a href="/My Dev/Ericreates Website/main/index.html"><img src="/My Dev/Ericreates Website/images/Logo/main logo.png" alt="ericreates"></a>

      <div class="nav-lists" id="navList">
          <i class="fa-solid fa-xmark" onclick="hideMenu()"></i>
              <ul>
                <li><a href="/My Dev/Ericreates Website/main/index.html">HOME</a></li>
                <li><a href="/My Dev/Ericreates Website/portfolios/portfolios.html">PORTFOLIOS</a></li>
                <li><a href="/My Dev/Ericreates Website/about me/about_me.html">ABOUT ME</a></li>
                <li><a href="/My Dev/Ericreates Website/contact/contact.html">CONTACT</a></li>
              </ul>
      </div>

      <div class="header-search">
          <div class="search-box">
              <input type="text" id="search-input" placeholder="Search portofolios" autocomplete="off">
              <button id="search-button">
                  <i class="fas fa-search"></i>
              </button>
              <ul id="autocomplete-list" class="hidden"></ul>
          </div>
      </div>
      <i class="fa-solid fa-bars" onclick="showMenu()"></i>
  </nav>

  <!-- Search Result -->
  <h1>Search result</h1>
  <div id="detail-container"></div>
  
  <!-- Footer -->
  <div class="footer">
    <div class="footer-head">
        <img src="/My Dev/Ericreates Website/images/Logo/favicon.png" alt="ericreates logo">
            <div class="footer-text">ERICREATES<br>Develop Your Website<br>Design Your Needs</div>
        <div class="social-media">
            <a href="mailto:ericreates92@gmail.com">
                <i class="fa-solid fa-envelope" target="_blank"></i>
            </a>
            <a href="https://www.instagram.com/ericreates_/" target="_blank">
                <i class="fa-brands fa-square-instagram"></i>
            </a>
            <a href="https://github.com/ericode92" target="_blank">
                <i class="fa-brands fa-github"></i>
            </a>
        </div>
    </div>

    <div class="footer-content">
        <div class="info">
            <span class="skill-text">SKILLS</span>
                <ul>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/HTML5_logo.png" alt="html"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/CSS3_logo.png" alt="css"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/JavaScript_logo.png" alt="javascript"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/WordPress_blue_logo.svg.png" alt="wordpress"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/Shopify_logo.svg.png" alt="shopify"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/Python-logo.png" alt="python"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/figma.png" alt="figma"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/photoshop.png" alt="photoshop"></li>
                    <li class="skill"><img src="/My Dev/Ericreates Website/images/Footer_skills/illustrator.png" alt="illustrator"></li>
                </ul>
            <span class="email-address">ericreates92@gmail.com</span>
        </div>
    </div>
</div>
<div class="copyright">
    â“’ ERICREATES. ALL RIGHTS RESERVED.
</div>

<script src="detail.js"></script>
<script src="search.js"></script>
<script>
    async function fetchSearchData() {
  const response = await fetch('/My Dev/Ericreates Website/data/searchData.json');
  return response.json();
}

function getQueryParam(param) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(param);
}

function searchInData(data, keyword) {
  keyword = keyword.toLowerCase();
  return data.filter(item =>
    item.title.toLowerCase().includes(keyword) ||
    item.description.toLowerCase().includes(keyword) ||
    item.category.toLowerCase().includes(keyword) ||
    (item.tags && item.tags.some(tag => tag.toLowerCase().includes(keyword)))
  );
}

function renderResults(results) {
  const container = document.getElementById('search-results');
  if (results.length === 0) {
    container.innerHTML = '<p>No Result.</p>';
    return;
  }

  container.innerHTML = results.map(item => `
    <div class="result-card">
      <a href="detail.html?id=${item.id}">
        <img src="${item.thumbnail}" alt="${item.title}">
        <div class="info">
          <h3>${item.title}</h3>
          <p>${item.description}</p>
        </div>
      </a>
    </div>
  `).join('');
}

(async () => {
  const keyword = getQueryParam('query');
  const data = await fetchSearchData();
  const results = searchInData(data, keyword);
  renderResults(results);
})();
    </script>
    
</body>
</html>
